(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"/Td9":function(e,a,t){"use strict";t.r(a);t("IzEo");var l=t("bx4M"),n=(t("T2oS"),t("W9HT")),r=(t("miYZ"),t("tsqr")),c=t("k1fw"),i=t("q1tI"),o=t.n(i),u=t("Hx5s"),s=(t("i8oR"),t("9kvl")),m=t("UnBh"),d=function(e){var a=e.location,t=e.articleDetail,s=e.allCategories,d=e.dispatch,f=e.loading,g=e.updating,p=function(e){try{d({type:"article/updateArticle",payload:Object(c["a"])(Object(c["a"])({},e),{},{articleId:a.query.id})})}catch(t){r["a"].error("\u66f4\u65b0\u5931\u8d25")}};return Object(i["useEffect"])((function(){d({type:"category/fetchAllCategory"}),d({type:"article/fetchArticleDetail",payload:a.query.id})}),[]),o.a.createElement(u["b"],{title:"\u6587\u7ae0\u7f16\u8f91"},o.a.createElement(l["a"],null,o.a.createElement(n["a"],{tip:"Loading...",spinning:f},o.a.createElement(m["a"],{articleDetail:t,allCategories:s,updating:g,onFinish:p}))))};a["default"]=Object(s["a"])((function(e){var a=e.article,t=e.category,l=e.loading;return{articleDetail:a.articleDetail,allCategories:t.allCategory,loading:l.effects["article/fetchArticleDetail"],updating:l.effects["article/updateArticle"]}}))(d)},UnBh:function(e,a,t){"use strict";t("7Kak");var l=t("9yH6"),n=(t("DZo9"),t("8z0m")),r=(t("+L6B"),t("2/Rp")),c=(t("IzEo"),t("bx4M")),i=t("0Owb"),o=(t("OaEy"),t("2fM7")),u=t("oBTY"),s=(t("y8nQ"),t("Vl3Y")),m=t("tJVT"),d=t("q1tI"),f=t.n(d),g=t("1M3H"),p=t.n(g),b=t("56rK"),v=t.n(b),E=(t("i8oR"),t("71ry")),C=t("whJP"),O=(t("5Dmo"),t("3S7+")),y=(t("+BJd"),t("mr32")),j=t("6y1p"),h=t("xvlK"),I=(t("5NDa"),t("5rEg")),T=function(e){var a=e.value,t=e.isFocus,l=e.onChange,n=e.onBlur,r=e.onPressEnter,c=Object(d["useRef"])(null);return Object(d["useEffect"])((function(){c.current&&c.current.focus()}),[t]),f.a.createElement(I["a"],{ref:c,size:"small",className:"tag-input",value:a,onChange:l,onBlur:n,onPressEnter:r})},w=T,F=(t("VbOK"),["#f50","#2db7f5","#87d068","#108ee9","magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"]),S=function(e){var a=e.tags,t=e.setTags,l=Object(d["useState"])(!1),n=Object(m["a"])(l,2),r=n[0],c=n[1],i=Object(d["useState"])(""),o=Object(m["a"])(i,2),s=o[0],g=o[1],p=Object(d["useState"])(-1),b=Object(m["a"])(p,2),v=b[0],E=b[1],C=Object(d["useState"])(""),I=Object(m["a"])(C,2),T=I[0],S=I[1],k=Object(d["useState"])(!1),q=Object(m["a"])(k,2),D=q[0],x=q[1],B=Object(d["useState"])(!1),V=Object(m["a"])(B,2),N=V[0],M=V[1],R=function(e){var l=a.filter((function(a){return a!==e}));t(l)},z=function(){c(!0),x(!0)},A=function(e){g(e.target.value)},H=function(){s&&-1===a.indexOf(s)&&t([].concat(Object(u["a"])(a),[s])),c(!1),g("")},J=function(e){S(e.target.value)},K=function(){var e=Object(u["a"])(a);e[v]=T,t(e),E(-1),g("")};return Object(d["useEffect"])((function(){}),[]),f.a.createElement("div",null,f.a.createElement(j["a"],null,a.map((function(e,a){if(v===a)return f.a.createElement(w,{key:e,isFocus:N,value:T,onChange:J,onBlur:K,onPressEnter:K});var t=e.length>20,l=f.a.createElement(y["a"],{color:F[a],className:"edit-tag",key:e,closable:!0,onClose:function(){return R(e)}},f.a.createElement("span",{onDoubleClick:function(t){E(a),S(e),M(!0),t.preventDefault()}},t?"".concat(e.slice(0,20),"..."):e));return t?f.a.createElement(O["a"],{title:e,key:e},l):l})),r&&f.a.createElement(w,{isFocus:D,value:s,onChange:A,onBlur:H,onPressEnter:H}),!r&&f.a.createElement(y["a"],{className:"site-tag-plus",onClick:z},f.a.createElement(h["a"],null)," New Tag")))},k=S,q={wrapperCol:{lg:{offset:2,span:4},xs:{offset:0,span:24}}},D={labelCol:{span:2},wrapperCol:{span:17}},x=new p.a,B="/api/upload/file",V=function(e){var a=e.articleDetail,t=e.allCategories,g=e.updating,p=e.onFinish,b=e.submitTitle,O=Object(d["useState"])([]),y=Object(m["a"])(O,2),j=y[0],h=y[1],I=Object(d["useState"])(""),T=Object(m["a"])(I,2),w=T[0],F=T[1],S=s["a"].useForm(),V=Object(m["a"])(S,1),N=V[0],M=function(e){var a=e.text;N.setFieldsValue({articleContent:a})},R=function(e){},z={action:B,onChange:function(e){var a=Object(u["a"])(e.fileList);a=a.slice(-1),a=a.map((function(e){return e.response&&(e.url=e.response.data),e}));var t=a[0]&&a[0].url||"";N.setFieldsValue({articleCoverImage:t}),F(t)},listType:"picture",multiple:!0};return Object(d["useEffect"])((function(){N.setFieldsValue({articleTitle:null===a||void 0===a?void 0:a.articleTitle,articleTags:null===a||void 0===a?void 0:a.articleTags,articleCategoryId:null===a||void 0===a?void 0:a.articleCategoryId,articleContent:null===a||void 0===a?void 0:a.articleContent,articleStatus:null===a||void 0===a?void 0:a.articleStatus,enableComment:null===a||void 0===a?void 0:a.enableComment,articleCoverImage:null===a||void 0===a?void 0:a.articleCoverImage}),F((null===a||void 0===a?void 0:a.articleCoverImage)||""),h((null===a||void 0===a?void 0:a.articleTags.map((function(e){return e.tagName})))||[])}),[a]),Object(d["useEffect"])((function(){N.setFieldsValue({articleTags:j})}),[j]),f.a.createElement(s["a"],Object(i["a"])({},D,{form:N,name:"basic",onFinish:p,onFinishFailed:R}),f.a.createElement(s["a"].Item,{label:"\u6807\u9898",name:"articleTitle",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898!"}]},f.a.createElement(C["a"],{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",autoSize:{minRows:1,maxRows:6}})),f.a.createElement(s["a"].Item,Object(i["a"])({label:"\u5206\u7c7b"},{labelCol:{span:2},wrapperCol:{span:6}},{name:"articleCategoryId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6587\u7ae0\u5206\u7c7b!"}]}),f.a.createElement(o["a"],{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6587\u7ae0\u5206\u7c7b"},"undefined"!==typeof t&&t.map((function(e){return f.a.createElement(o["a"].Option,{value:e.categoryId,key:e.categoryId},e.categoryName)})))),f.a.createElement(s["a"].Item,{label:"\u6807\u7b7e",name:"articleTags",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u7b7e!"}]},f.a.createElement(k,{tags:j,setTags:h})),f.a.createElement(s["a"].Item,{label:"\u5c01\u9762",name:"articleCoverImage",rules:[{required:!1,message:"\u8bf7\u4e0a\u4f20\u6587\u7ae0\u5c01\u9762!"}]},f.a.createElement(f.a.Fragment,null,f.a.createElement(c["a"],{hoverable:!0,style:{width:400,marginBottom:"20px"},cover:f.a.createElement("img",{alt:"\u5c01\u9762",src:w})},f.a.createElement(c["a"].Meta,{title:N.getFieldValue("articleTitle"),description:N.getFieldValue("articleCoverImage")})),f.a.createElement(n["a"],z,f.a.createElement(r["a"],null,f.a.createElement(E["UploadOutlined"],null)," \u70b9\u51fb\u4e0a\u4f20")))),f.a.createElement(s["a"].Item,{label:"\u72b6\u6001",name:"articleStatus",rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u6587\u7ae0\u72b6\u6001!"}]},f.a.createElement(l["default"].Group,{name:"articleStatus"},f.a.createElement(l["default"],{value:1},"\u53d1\u5e03"),f.a.createElement(l["default"],{value:0},"\u8349\u7a3f"))),f.a.createElement(s["a"].Item,{label:"\u8bc4\u8bba",name:"enableComment",rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u8bc4\u8bba\u5f00\u542f\u72b6\u6001!"}]},f.a.createElement(l["default"].Group,{name:"enableComment"},f.a.createElement(l["default"],{value:1},"\u5f00\u542f"),f.a.createElement(l["default"],{value:0},"\u5173\u95ed"))),f.a.createElement(s["a"].Item,Object(i["a"])({label:"\u5185\u5bb9"},{labelCol:{span:2},wrapperCol:{span:20}},{name:"articleContent",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u5185\u5bb9!"}]}),f.a.createElement(v.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u5185\u5bb9",config:{view:{menu:!0,md:!0,html:!1}},style:{height:"500px"},renderHTML:function(e){return x.render(e)},onChange:M})),f.a.createElement(s["a"].Item,q,f.a.createElement(r["a"],{block:!0,type:"primary",htmlType:"submit",loading:g},b||"\u66f4\u65b0\u6587\u7ae0")))};a["a"]=V},VbOK:function(e,a,t){}}]);